üíº Functional Design Document (FDD)

Project: Personal Finance Management System
Version: V1
Primary Stack: Django (Python), PostgreSQL, TailwindCSS, Vanilla JS (Ajax)
Mode: Self-hosted (Docker)
Default Theme: Dark (with light toggle)
Authoring Date: November 2025

1. Overview
1.1 Purpose

The purpose of this system is to provide users with a self-hosted, secure, and intuitive personal finance management platform to record, categorize, and analyze their financial transactions across multiple accounts (bank, credit card, wallet, cash, FDs, loans, and investments).

It will help users:

Consolidate financial information in one place.

Track income, expenses, and transfers.

Monitor account balances and net worth.

Maintain investment and fixed deposit records.

Generate analytical reports to visualize financial patterns.

2. System Scope
2.1 Functional Modules (V1)
Module	Description
Authentication	Email/password login & signup with session management.
User Profile & Preferences	Manage user profile, theme preference, and masking settings.
Accounts	Create/manage accounts (bank, credit card, wallet, cash, FD, loan).
Transactions	Record, view, and manage credit/debit entries per account.
Transfers	Move money between user-owned accounts.
Categories	Maintain and manage categorized expense/income classification.
Investments	Manage stocks and mutual fund holdings, trades, and instruments.
Fixed Deposits	Record FD details and maturity info.
Loans	Record loan details and manual repayments.
Dashboard	Summarized analytics and KPIs.
Reports	Income vs Expense, Spend by Category, Net Worth, Holdings Snapshot.
Activity Log	Track user actions (create/update/delete).
Settings	Preferences, password change, and session management.
3. User Roles & Permissions
3.1 Roles

User:
Can access, create, and manage only their own data.

Admin (system-level, optional later):
Has visibility into all users‚Äô data for debugging (disabled by default in V1).

3.2 Permissions Matrix (Simplified)
Module	User Permissions	Admin Permissions (future)
Accounts	CRUD own accounts	CRUD all
Transactions	CRUD own transactions	CRUD all
Investments	CRUD own investments	CRUD all
Categories	View default / CRUD own	Manage defaults
Reports	View only	View all
Settings	Update own	Update global defaults
4. Core Functional Requirements
4.1 Authentication

Login:

Email + Password form.

Validate against stored hash.

2-week session timeout (configurable).

Signup:

Create new user record.

No email verification.

Logout:

Ends current session.

Password Change:

Allowed via Settings > Security.

Validation:

Password ‚â• 8 chars, no strict complexity.

4.2 Accounts Module
Description

Manages all financial accounts where money can flow in or out.

Account Types

Savings

Credit Card

Wallet (e.g., Amazon Pay)

Cash

FD (Fixed Deposit)

Loan

Fields
Field	Type	Notes
Name / Nickname	Text	Display name
Account Type	Enum	One of the above
Institution	Text	Optional
Account Number	Text (masked)	Last 4 digits displayed
Opening Balance	Decimal	Optional
Currency	INR (fixed)	‚Äî
Opened On	Date	‚Äî
Notes	Text	Optional
Status	Enum	Active / Archived
Actions

Add / Edit / Delete (soft delete).

View account detail & linked transactions.

View balance snapshot (sum of all transactions + opening balance).

Validations

Account name required.

Account type required.

Account number unique per user per institution.

4.3 Transactions Module
Description

Captures user‚Äôs credits (income) and debits (expenses) per account.

Transaction Fields
Field	Type	Description
Date & Time	Datetime (IST)	Required
Credit/Debit	Enum	Credit (+) or Debit (‚àí)
Amount	Decimal	Required, > 0
Account	FK	Bank / Wallet / Credit Card / Cash
Type	Enum	UPI / Card / Netbanking / Cash / Wallet
Purpose	Text	Free text description
Category	FK	Required
Created By	FK	Auto-filled
Created At	Datetime	Auto
Updated At	Datetime	Auto
Deleted At	Datetime	Soft delete marker
Actions

Create, edit, delete (soft).

Filter/search by date, account, type, category, amount range.

Inline category editing in list.

Pagination & sorting.

Business Rules

Debit = Expense ‚Üí reduces account balance.

Credit = Income ‚Üí increases account balance.

Double-entry ledger maintains balance consistency.

Validations

Amount cannot be 0.

Category required.

Credit/Debit must be selected.

4.4 Transfers
Description

Used to move funds between user‚Äôs accounts.

Fields
Field	Type	Description
Date & Time	Datetime (IST)	Required
From Account	FK	‚Äî
To Account	FK	‚Äî
Amount	Decimal	Required
Method	Enum	UPI / NEFT / IMPS / Netbanking / Cash
Purpose / Note	Text	Optional
Rules

From Account ‚â† To Account.

Creates two linked ledger postings (Debit from A, Credit to B).

Displays as a single ‚ÄúTransfer‚Äù row in the UI.

4.5 Categories
Description

Classify transactions for reporting and analytics.

Fields
Field	Type	Notes
Name	Text	e.g., Groceries
Parent Category	FK (self)	For tree hierarchy
Type	Enum	Income / Expense / Transfer / Fee
Color	Text	Optional (for chart)
Defaults (India-specific)

Expense: Groceries, Rent, Bills, Education, Travel, Fuel, Fashion, Dining, Healthcare, Entertainment, Fees & Charges.

Income: Salary, Interest, Dividends, Refunds, Others.

Actions

Add/Edit/Delete custom categories.

Prevent deletion if in use (reassign option).

4.6 Investments
Description

Manage stocks and mutual fund investments.

Entities

Instrument: defines the security (Stock/MF).

Trade: records buy/sell/dividend/fee.

Holding: derived aggregate (per instrument).

Fields

Instrument

Field	Type	Description
Name	Text	e.g., HDFC Bank
Symbol	Text	e.g., HDFCBANK
ISIN	Text	Unique code
Type	Enum	Stock / Mutual Fund
Notes	Text	Optional

Trade

Field	Type	Description
Type	Enum	Buy / Sell / Dividend / Fees
Date & Time	Datetime (IST)	‚Äî
Instrument	FK	‚Äî
Units	Decimal	For buy/sell
Price per Unit	Decimal	‚Äî
Fees	Decimal	Optional
Funding Account	FK	Cash/Bank/Wallet
Purpose	Text	Optional

Holding

Field	Type	Description
Instrument	FK	‚Äî
Units	Decimal	Derived
Avg Cost	Decimal	Derived
Value	Decimal	Manual or calculated (if price exists)
Rules

FIFO lot calculation for realized P&L.

Dividends/fees adjust holdings and income categories.

Manual price entry screen available.

4.7 Fixed Deposits (FDs)
Description

Tracks user‚Äôs fixed income deposits.

Fields
Field	Type	Description
Account Name	Text	‚Äî
Principal	Decimal	Required
Interest Rate	Decimal	Stored, not computed
Compounding	Enum	Monthly / Quarterly / Annually
Start Date	Date	‚Äî
Maturity Date	Date	‚Äî
Maturity Amount	Decimal	Stored
Notes	Text	Optional
Behavior

FD transactions recorded separately in Transactions (for funding and interest).

No interest calculation in V1.

4.8 Loans
Description

Stores loan details and manual EMI tracking.

Fields
Field	Type	Description
Lender Name	Text	‚Äî
Principal	Decimal	‚Äî
Interest Rate	Decimal	‚Äî
EMI Amount	Decimal	Optional
Start Date	Date	‚Äî
Due Day	Integer	Optional
Status	Enum	Active / Closed
Behavior

EMI payments manually logged in Transactions.

Optional ‚ÄúRecord EMI‚Äù shortcut pre-fills transaction form.

4.9 Dashboard
Widgets
Widget	Description
Net Worth	Sum of balances + investments
Income (MTD)	Total income for current month
Expense (MTD)	Total expense for current month
Cash & Wallets	Combined balances
Investments	Cost vs Current (if available)
Spend by Category	Donut chart
Income vs Expense	Bar chart
Accounts Snapshot	List of active accounts
Recent Transactions	Last 10 entries
4.10 Reports
Report	Description
Net Worth Over Time	Line chart, monthly aggregation
Spend by Category	Donut + tabular
Income vs Expense	Monthly bar
Account Balances	Table
Holdings Snapshot	Cost/current summary

All reports have filter panels (date range, account, type, category).

4.11 Activity Log

Tracks CRUD actions.

Field	Type	Description
User	FK	‚Äî
Action	Enum	Create / Update / Delete
Object Type	Text	Transaction / Account / Investment
Object ID	Integer	‚Äî
Timestamp	Datetime (IST)	‚Äî
IP Address	String	‚Äî
Change Summary	JSON/Text	Field diffs
4.12 Settings
Profile

Name (editable)

Email (readonly)

Theme toggle (Dark/Light)

Date format (fixed display)

Timezone (fixed IST)

Security

Change Password

Session list with IP & device

Log out all sessions

Preferences

Masking behavior toggle

Default landing page

Default filters

5. Non-Functional Requirements
Category	Description
Performance	Must handle 10K transactions per user smoothly. Indexed queries on transaction & account tables.
Security	Hashed passwords, CSRF & session protection, masked data in UI.
Reliability	Auto reconnect to DB, soft deletes for safety.
Scalability	Modular Django apps for easy scaling later (Celery, Redis to be added in V2).
Backup	Managed externally (pg_dump).
Time zone	Store & display in IST.
UI/UX	Minimalist dark theme with optional light mode.
Compliance	No storage of full card/bank numbers.
Extensibility	Hooks for future import/export, ML categorization, APIs.
6. Error Handling
Scenario	User Feedback
Missing required field	Inline red message below field.
Invalid amount	‚ÄúAmount must be greater than zero.‚Äù
Duplicate account number	‚ÄúThis account already exists.‚Äù
Transfer from and to same account	‚ÄúCannot transfer between the same account.‚Äù
Unauthorized access	Redirect to login.
Server errors	Toast ‚ÄúSomething went wrong. Try again.‚Äù
Validation success	Toast ‚ÄúSaved successfully.‚Äù
7. Audit & Logging

Log every create/update/delete of key models.

Capture:

User ID

Object Type & ID

Action

Timestamp (IST)

IP Address

Changed Fields (diff JSON)

Exposed through Activity Log page.

8. Future (V2+) Extensibility Hooks
Planned Module	Description
Import/Export	CSV & API import/export.
Budgeting	Monthly budgets & category limits.
Capital Gains	LTCG/STCG tracking for investments.
Auto Price Fetch	AMFI/NSE feeds.
Email Flows	Verification & password reset.
2FA	TOTP-based.
ML Categorization	Auto-suggest categories.
Notifications	Bill due, balance low, etc.
9. Data Flow Summary
Example: Add Transaction

User fills form ‚Üí Validates input.

Django view receives payload.

Creates transaction record.

Creates journal entry with balanced postings.

Updates account balance cache.

Activity log created.

UI shows success toast & refreshed list.

Example: Transfer

User fills ‚ÄúTransfer‚Äù modal.

System creates two linked postings (debit/credit).

Ledger validates zero-sum.

Activity log created.

Dashboard recalculates balances.

10. Data Model (simplified functional schema)
User ‚îÄ‚î¨‚îÄ< Account ‚îÄ‚î¨‚îÄ< Transaction
       ‚îÇ             ‚îî‚îÄ< Transfer
       ‚îú‚îÄ< Category
       ‚îú‚îÄ< Instrument ‚îÄ‚î¨‚îÄ< Trade ‚îÄ‚î¨‚îÄ< Holding
       ‚îÇ                ‚îÇ          ‚îî‚îÄ< Price
       ‚îú‚îÄ< FD
       ‚îú‚îÄ< Loan
       ‚îî‚îÄ< ActivityLog

11. UI States

Loading: subtle skeleton shimmer.

Success: toast (‚ÄúSaved!‚Äù).

Error: toast with retry link.

Empty: illustrated state + CTA.

Dark/Light toggle: persist in session & profile.

12. Security and Privacy

Passwords hashed (Argon2/Bcrypt).

CSRF tokens for all POST requests.

Mask sensitive fields by default.

Strict user-level query scoping.

HTTPS-ready (through reverse proxy).

Audit trail for every modification.

13. Deployment Plan

Docker Compose services:

web: Django app (Gunicorn).

db: PostgreSQL 16.

proxy: Nginx/Caddy (optional, local use).

Volumes:

/db_data ‚Üí Postgres persistent data.

/media ‚Üí user-uploaded receipts (future).

14. Acceptance Criteria Summary
Module	Acceptance Criteria
Auth	User can sign up, log in/out; session persists.
Accounts	User can add/edit/delete accounts; balances computed correctly.
Transactions	User can log credits/debits with correct UI flow.
Transfers	Creates two linked entries; balances update.
Categories	Default tree exists; editable by user.
Investments	User can record trades; holdings aggregate properly.
FDs	User can store FD details.
Loans	User can store loan details and record EMI transactions.
Dashboard	Displays correct totals and charts.
Reports	Generate correct filtered reports.
Activity Log	Shows all user actions with correct metadata.