{% extends 'auth/base_auth.html' %}
{% load static %}

{% block title %}Reset Password - Financio{% endblock %}

{% block auth_content %}
<!-- Logo -->
<div class="flex justify-center px-4 py-8">
    <img src="{% static 'logo_dark.png' %}" alt="Financio" class="h-24 hidden dark:block">
    <img src="{% static 'logo_light.png' %}" alt="Financio" class="h-24 block dark:hidden">
</div>

<h2 class="text-gray-900 dark:text-white tracking-light text-[28px] font-bold leading-tight px-4 text-center pb-3 pt-5">
    Reset your password
</h2>

<p class="text-gray-600 dark:text-gray-400 text-base leading-normal px-4 text-center pb-5">
    Enter your username and recovery key to set a new password.
</p>

<!-- Messages -->
{% if messages %}
<div class="px-4 py-3">
    {% for message in messages %}
    <div class="rounded-lg p-4 {% if message.tags == 'error' %}bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200{% else %}bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200{% endif %}">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

<!-- Password Reset Form -->
<form method="post" action="{% url 'password_reset' %}">
    {% csrf_token %}
    
    <!-- Username Field -->
    <div class="px-4 py-3">
        <label class="flex flex-col w-full">
            <p class="text-gray-900 dark:text-white text-base font-medium leading-normal pb-2">Username</p>
            <input
                type="text"
                name="username"
                placeholder="Enter your username"
                required
                class="form-input w-full rounded-lg text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary border border-gray-300 dark:border-none bg-white dark:bg-dark-surface h-14 placeholder:text-gray-400 dark:placeholder:text-[#9aa5bc] px-4 text-base font-normal"
            />
        </label>
    </div>

    <!-- Recovery Key Field -->
    <div class="px-4 py-3">
        <label class="flex flex-col w-full">
            <p class="text-gray-900 dark:text-white text-base font-medium leading-normal pb-2">Recovery Key</p>
            <input
                type="text"
                name="recovery_token"
                placeholder="Enter your 16-character recovery key"
                required
                class="form-input w-full rounded-lg text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary border border-gray-300 dark:border-none bg-white dark:bg-dark-surface h-14 placeholder:text-gray-400 dark:placeholder:text-[#9aa5bc] px-4 text-base font-normal"
            />
        </label>
    </div>

    <!-- New Password Field -->
    <div class="px-4 py-3">
        <label class="flex flex-col w-full">
            <p class="text-gray-900 dark:text-white text-base font-medium leading-normal pb-2">New Password</p>
            <input
                type="password"
                name="new_password1"
                placeholder="Enter new password"
                required
                class="form-input w-full rounded-lg text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary border border-gray-300 dark:border-none bg-white dark:bg-dark-surface h-14 placeholder:text-gray-400 dark:placeholder:text-[#9aa5bc] px-4 text-base font-normal"
            />
        </label>
    </div>

    <!-- Confirm New Password Field -->
    <div class="px-4 py-3">
        <label class="flex flex-col w-full">
            <p class="text-gray-900 dark:text-white text-base font-medium leading-normal pb-2">Confirm New Password</p>
            <input
                type="password"
                name="new_password2"
                placeholder="Confirm new password"
                required
                class="form-input w-full rounded-lg text-gray-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary border border-gray-300 dark:border-none bg-white dark:bg-dark-surface h-14 placeholder:text-gray-400 dark:placeholder:text-[#9aa5bc] px-4 text-base font-normal"
            />
        </label>
    </div>
    
    <!-- Submit Button -->
    <div class="px-4 py-3 mt-2">
        <button
            type="submit"
            class="flex w-full cursor-pointer items-center justify-center rounded-lg h-12 bg-primary hover:bg-primary-hover text-white text-base font-bold transition-colors shadow-lg shadow-primary/20"
        >
            Reset Password
        </button>
    </div>
    
    <!-- Back to Login -->
    <div class="px-4 py-3">
        <a
            href="{% url 'login' %}"
            class="flex w-full cursor-pointer items-center justify-center rounded-lg h-12 bg-gray-100 dark:bg-dark-surface hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white text-base font-bold transition-colors"
        >
            Back to login
        </a>
    </div>
</form>
{% endblock %}
